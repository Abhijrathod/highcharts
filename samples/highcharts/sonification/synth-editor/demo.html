<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/draggable-points.js"></script>
<script src="https://code.highcharts.com/modules/sonification.js"></script>

<main>
  <h1>Synth Patch Editor</h1>
  <div class="row firstrow">
    <p id="intro">Play the synth using the <span class="code">A</span> to <span class="code">K</span> and <span class="code">W</span> to <span class="code">U</span> keys on your keyboard, simulating white and black keys on a piano.</p>
    <p id="keyStatus">Synth not started</p>
  </div>

  <button id="startSynth">Start synth</button>

  <div id="controls" class="hidden">
      <div class="row">
        <label>Volume <input id="masterVolume" min="0.1" max="1" step="0.05" type="range" value="0.8"></label>
        <label>Preset <select id="preset"></select></label>
      </div>

      <div class="row masterEnvelopes">
        <div>
          <h2>Attack Envelope</h2>
          <div id="masterAttackEnvChart" class="chart"></div>
        </div>
        <div>
          <h2>Release Envelope</h2>
          <div id="masterReleaseEnvChart" class="chart"></div>
        </div>
      </div>

      <div class="row">
        <h2>Oscillators</h2>
        <button id="addOsc">+ Add oscillator</button>
      </div>
      <div id="oscillators" class="row">
      </div>

      <h2>Generated Patch JSON</h2>
      <textarea readonly id="json">{}</textarea>
  </div>
</main>



<!-- ----------------------------------------- PRESETS STORED BELOW ------------------------------------------------ -->

<div id="presets">
  <div id="preset-basic">
    {
      "masterVolume": "0.8",
      "oscillators": [
       {
        "type": "sine",
        "lowpass": {},
        "highpass": {},
        "modulateOscillator": null,
        "attackEnvelope": [],
        "releaseEnvelope": []
       }
      ]
     }
  </div>
  <div id="preset-whirlwind">
    {
      "masterVolume": "0.8",
      "oscillators": [
       {
        "type": "whitenoise",
        "lowpass": {
         "frequency": 1,
         "frequencyPitchTrackingMultiplier": 4000,
         "Q": 23
        },
        "highpass": {
         "frequency": 1,
         "frequencyPitchTrackingMultiplier": 4000
        }
       },
       {
        "type": "sine",
        "freqMultiplier": 0.016,
        "volume": 1000,
        "modulateOscillator": 0,
        "lowpass": {},
        "highpass": {}
       }
      ]
     }
  </div>
  <div id="preset-advanced">
    {
      "masterVolume": "0.85",
      "oscillators": [
       {
        "type": "sawtooth",
        "volume": 0.1,
        "lowpass": {
         "frequency": 2500,
         "Q": 2
        },
        "highpass": {
         "frequency": 300
        },
        "attackEnvelope": [],
        "releaseEnvelope": []
       },
       {
        "type": "sine",
        "freqMultiplier": 15,
        "volume": 2000,
        "lowpass": {},
        "highpass": {},
        "modulateOscillator": 0,
        "attackEnvelope": [],
        "releaseEnvelope": []
       },
       {
        "type": "sine",
        "fixedFrequency": 4,
        "volume": 50,
        "lowpass": {},
        "highpass": {},
        "modulateOscillator": 1,
        "attackEnvelope": [],
        "releaseEnvelope": []
       },
       {
        "type": "square",
        "freqMultiplier": 0.5,
        "fixedFrequency": 358,
        "volume": 0.2,
        "lowpass": {
         "frequency": 300
        },
        "highpass": {},
        "attackEnvelope": [],
        "releaseEnvelope": []
       },
       {
        "type": "sawtooth",
        "freqMultiplier": 1.5,
        "fixedFrequency": 355,
        "volume": 0.1,
        "lowpass": {
         "frequency": 6000
        },
        "highpass": {},
        "attackEnvelope": [],
        "releaseEnvelope": []
       }
      ]
     }
  </div>

</div>